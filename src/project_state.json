{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 25,
  "summary": "Complaint and issue-tracking website for FLAME University students, with structured complaint submission, categorization, public status tracking, and publicly visible solutions/updates to improve transparency and resolution efficiency.",
  "architectural_notes": [
    "Admin Panel should be accessible at /admin; ensure the frontend router/build includes the /admin route and page bundle in production deployments.",
    "Ensure the backend includes and serves an authenticated identity/debug endpoint (e.g., GET /api/whoami) in production builds so users can retrieve their Principal after Internet Identity login.",
    "Admin access is controlled by an allowlist of Internet Identity Principals; add jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe to the admin allowlist to grant /admin access.",
    "Implement persistent super-admin initialization that stores the owner Principal (jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe) in stable storage to survive all canister upgrades and deployments."
  ],
  "known_issues": [
    "Admin panel URL /admin returns \"Not Found\" on production deployment (https://flame-issue-tracker-lm2.caffeine.xyz/admin).",
    "After logging in with Internet Identity, /api/whoami returns \"Not Found\", preventing users from retrieving their Principal ID.",
    "Admin panel at /admin shows \"Access Denied\" even when user believes they are using the same Internet Identity account (likely admin allowlist/principal mismatch or auth not being recognized in production)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-implement-complaint-submission-with-a-structured-form-that-collects-complaint-type-category-description-urgency-level-and-an-optional-proof-upload-validate-inputs-and-show-clear-success-error-states",
      "title": "Implement complaint submission with a structured form that collects complaint type, category, description, urgency level, and an optional proof upload; validate inputs and show clear success/error states.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-create-complaint-categories-and-category-browsing-ui-tabs-sections-covering-food-services-professors-academics-ragging-safety-discipline-rules-hostel-facilities-and-administration-and-ensure-each-complaint-is-shown-under-its-selected-category",
      "title": "Create complaint categories and category browsing UI (tabs/sections) covering: Food Services, Professors & Academics, Ragging & Safety, Discipline Rules, Hostel/Facilities, and Administration, and ensure each complaint is shown under its selected category.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-build-a-public-complaint-board-that-lists-complaints-with-status-labels-submitted-under-review-in-progress-resolved-keep-complaints-visible-until-marked-resolved-include-a-complaint-detail-page",
      "title": "Build a public complaint board that lists complaints with status labels: Submitted, Under Review, In Progress, Resolved; keep complaints visible until marked Resolved; include a complaint detail page.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-an-admin-only-moderation-and-management-interface-to-update-complaint-status-submitted-under-review-in-progress-resolved-and-to-remove-or-hide-complaints-that-violate-moderation-rules",
      "title": "Provide an admin-only moderation and management interface to update complaint status (Submitted → Under Review → In Progress → Resolved) and to remove or hide complaints that violate moderation rules.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-solutions-updates-page-that-lists-official-responses-common-solutions-and-allow-admins-to-create-and-publish-solution-update-entries-that-can-reference-one-or-more-related-complaints-or-categories",
      "title": "Implement a Solutions & Updates page that lists official responses/common solutions, and allow admins to create and publish solution/update entries that can reference one or more related complaints or categories.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-search-and-filter-capabilities-across-public-complaints-including-free-text-search-and-filters-for-category-status-and-urgency",
      "title": "Add search and filter capabilities across public complaints, including free-text search and filters for category, status, and urgency.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-basic-moderation-rules-to-reduce-misuse-and-inappropriate-language-during-complaint-submission-including-a-profanity-inappropriate-language-filter-and-clear-user-feedback-when-content-is-rejected",
      "title": "Enforce basic moderation rules to reduce misuse and inappropriate language during complaint submission, including a profanity/inappropriate-language filter and clear user feedback when content is rejected.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-design-the-ui-to-be-clean-formal-and-mobile-friendly-with-clear-category-tabs-and-status-tags-and-apply-a-consistent-visual-theme-colors-typography-spacing-components-across-all-pages",
      "title": "Design the UI to be clean, formal, and mobile-friendly with clear category tabs and status tags, and apply a consistent visual theme (colors, typography, spacing, components) across all pages.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-current-site-logo-with-the-user-uploaded-image-website-logo-png-by-generating-and-using-a-512x512-logo-asset-at-frontend-public-assets-generated-flame-issue-tracker-logo-dim-512x512-png-the-same-path-currently-referenced-in-the-header-ensuring-the-logo-renders-correctly-in-the-header-on-all-pages",
      "title": "Replace the current site logo with the user-uploaded image (website logo.png) by generating and using a 512x512 logo asset at frontend/public/assets/generated/flame-issue-tracker-logo.dim_512x512.png (the same path currently referenced in the header), ensuring the logo renders correctly in the header on all pages.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-favicon-derived-from-the-uploaded-logo-and-reference-it-in-frontend-index-html-so-browser-tabs-show-the-new-icon",
      "title": "Add a favicon derived from the uploaded logo and reference it in frontend/index.html so browser tabs show the new icon.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-admin-panel-accessible-at-the-exact-path-admin-https-flame-issue-tracker-lm2-caffeine-xyz-admin-so-it-no-longer-returns-not-found",
      "title": "Make the Admin Panel accessible at the exact path \"/admin\" (https://flame-issue-tracker-lm2.caffeine.xyz/admin) so it no longer returns \"Not Found\".",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-navigation-and-deep-links-related-to-the-admin-panel-consistently-work-with-the-fixed-admin-entry-point-including-direct-url-entry-and-refresh",
      "title": "Ensure navigation and deep links related to the Admin Panel consistently work with the fixed /admin entry point (including direct URL entry and refresh).",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-frontend-route-at-api-whoami-that-renders-a-simple-page-showing-the-current-principal-and-role-if-available-and-provides-a-one-click-copy-action",
      "title": "Create a frontend route at \"/api/whoami\" that renders a simple page showing the current Principal (and role if available) and provides a one-click copy action.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-show-the-logged-in-principal-shortened-with-a-full-value-tooltip-or-expandable-view-somewhere-in-the-main-authenticated-ui-e-g-header-area-so-users-can-confirm-which-internet-identity-account-is-active",
      "title": "Show the logged-in Principal (shortened with a full-value tooltip or expandable view) somewhere in the main authenticated UI (e.g., header area) so users can confirm which Internet Identity account is active.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-access-denied-experience-to-include-troubleshooting-guidance-that-directs-users-to-api-whoami-to-retrieve-their-principal-for-admin-enablement",
      "title": "Update the admin access denied experience to include troubleshooting guidance that directs users to \"/api/whoami\" to retrieve their Principal for admin enablement.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-frontend-correctly-propagates-the-authenticated-internet-identity-principal-to-all-backend-calls-so-that-accesscontrol-checks-receive-the-correct-caller-principal-in-production",
      "title": "Ensure the frontend correctly propagates the authenticated Internet Identity principal to all backend calls, so that AccessControl checks receive the correct caller principal in production.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-accessdeniedscreen-component-to-display-the-user-s-current-principal-fetched-from-the-backend-directly-on-the-access-denied-page-so-users-can-immediately-see-which-identity-the-system-recognized-without-navigating-to-api-whoami",
      "title": "Update the AccessDeniedScreen component to display the user's current principal (fetched from the backend) directly on the access denied page, so users can immediately see which identity the system recognized without navigating to /api/whoami.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-admin-management-page-at-admin-access-control-that-displays-the-current-admin-allowlist-retrieved-from-the-backend-showing-all-principal-ids-with-admin-access",
      "title": "Create an admin management page at `/admin/access-control` that displays the current admin allowlist retrieved from the backend, showing all Principal IDs with admin access.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-accessdeniedscreen-component-to-display-both-the-user-s-current-principal-already-implemented-and-a-list-of-all-principals-that-have-admin-access-so-users-can-immediately-compare-their-identity-against-the-authorized-list",
      "title": "Update the AccessDeniedScreen component to display both the user's current Principal (already implemented) and a list of all Principals that have admin access, so users can immediately compare their identity against the authorized list.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-link-to-the-admin-management-page-admin-access-control-from-the-adminlandingpage-navigation-cards-so-admins-can-easily-access-the-allowlist-viewer",
      "title": "Add a link to the admin management page (`/admin/access-control`) from the AdminLandingPage navigation cards, so admins can easily access the allowlist viewer.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-add-comprehensive-error-handling-in-the-accessdeniedscreen-component-to-gracefully-handle-cases-where-getadminallowlist-fails-displaying-a-meaningful-error-message-and-allowing-users-to-still-see-their-own-principal-id-and-copy-it",
      "title": "Add comprehensive error handling in the AccessDeniedScreen component to gracefully handle cases where getAdminAllowlist() fails, displaying a meaningful error message and allowing users to still see their own Principal ID and copy it.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-add-defensive-error-handling-in-the-accessdeniedscreen-component-s-admin-allowlist-fetch-logic-to-prevent-ui-errors-when-getadminallowlist-fails-ensuring-the-user-s-principal-id-remains-visible-and-copyable-even-if-the-allowlist-cannot-be-loaded",
      "title": "Add defensive error handling in the AccessDeniedScreen component's admin allowlist fetch logic to prevent UI errors when getAdminAllowlist() fails, ensuring the user's Principal ID remains visible and copyable even if the allowlist cannot be loaded.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Structured complaint submission form with fields (type, category, description, urgency) and optional proof upload",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Complaint categorization and category pages/tabs (e.g., food services, academics, safety, discipline, hostel/facilities, administration)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Public complaint board showing complaints with status labels (submitted/under review/in progress/resolved) and visibility until resolved",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Solutions and updates page for official responses/common resolutions to repeated issues",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Search and filter to find existing/reported complaints and answers",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Basic moderation rules to prevent misuse and inappropriate language",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Mobile-friendly, clean and formal UI with clear category tabs and status tags",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Add a backend query method that returns the current caller’s Principal (and optionally their role) so the frontend can reliably display the logged-in identity.",
      "reqIds": [
        "REQ-13"
      ],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Grant admin access to the Internet Identity Principal \"jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe\" so that this user can access the /admin routes and perform admin-only backend operations guarded by AccessControl.isAdmin.",
      "reqIds": [
        "REQ-17"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Grant administrator access to the Internet Identity Principal \"jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe\" by adding it to the backend admin allowlist used by AccessControl.isAdmin, so that this user can access all /admin routes and perform admin-only operations.",
      "reqIds": [
        "REQ-18"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Ensure the admin allowlist change persists correctly across canister upgrades (do not reset or accidentally drop existing access-control state when deploying this fix). If a state migration is required by the existing AccessControl state design, add a conditional migration that preserves current state while adding the new admin principal.",
      "reqIds": [
        "REQ-19"
      ],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Add the Principal ID 'jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe' to the backend admin allowlist managed by AccessControl.isAdmin so this user can access all /admin routes and perform admin-only operations.",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Verify that the admin allowlist state persists correctly across canister upgrades and does not reset or drop existing admin principals when deploying this change. If a state migration is required by the current AccessControl design, implement a conditional migration that preserves all existing state while adding the new admin Principal.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Verify that the Principal 'jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe' is correctly added to the backend admin allowlist and that AccessControl.isAdmin returns true for this principal in the deployed canister.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Add logging or a debug query method in the backend that returns the current admin allowlist state, so developers can verify which principals have admin access without needing to redeploy.",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Add the Principal ID 'jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe' to the backend admin allowlist managed by AccessControl so this user can access all /admin routes and perform admin-only operations.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Verify that the admin allowlist modification preserves all existing admin principals and does not reset or drop any existing access-control state during deployment.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Add comprehensive admin access diagnostics including backend debug logging to verify caller Principal, admin management page showing current allowlist, persistent super-admin initialization for Principal jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe that survives deployments, and clear error messages showing current vs. authorized Principals when access is denied",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Add a backend query method `getAdminAllowlist()` that returns the complete list of Principal IDs currently granted admin access, so the admin management page can display the current allowlist state.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Add a backend query method `debugGetCallerPrincipal()` that returns the caller's Principal ID as seen by the backend, for diagnostic purposes when troubleshooting access issues.",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Implement persistent super-admin initialization in the backend that ensures Principal `jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe` is always present in the admin allowlist after every deployment and upgrade, treating it as a permanent owner.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Hardcode Principal 'jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe' as a permanent super-admin in the backend that initializes on every deployment and upgrade, ensuring this Principal always has admin access regardless of stored state.",
      "reqIds": [
        "REQ-34"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Fix the backend getAdminAllowlist() query method to ensure it returns the complete list of admin Principals without errors, and add proper error handling so it never returns null or throws uncaught exceptions.",
      "reqIds": [
        "REQ-35"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Verify that the AccessControl module correctly initializes and persists admin state across canister upgrades, ensuring that the hardcoded super-admin Principal is never lost during upgrades and that the state migration (if any) preserves all existing admin principals.",
      "reqIds": [
        "REQ-37"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Fix the backend getAdminAllowlist() query method to ensure it returns the complete list of admin Principals without throwing errors or exceptions, and add robust error handling so it always returns a valid array even if AccessControl state is uninitialized.",
      "reqIds": [
        "REQ-38"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Verify and ensure that Principal 'jwxbf-7t3mq-z2mw2-kglpm-vjiqq-yfjhx-fxojo-5k7kl-i6gx5-idwc6-qqe' is hardcoded as a permanent super-admin in the AccessControl module initialization, guaranteeing it is always present in the allowlist regardless of stored state or upgrade scenarios.",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Add backend logging or debug output during AccessControl initialization and getAdminAllowlist() execution to verify that the hardcoded super-admin is present and that the allowlist query executes successfully.",
      "reqIds": [
        "REQ-41"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "FLAME Issue Tracker",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}